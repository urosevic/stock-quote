jQuery(document).ready(function(e){e('button[name="sq_force_data_fetch_stop"]').on("click",function(a){a.preventDefault(),e(this).data("stop","true")}),e('button[name="sq_force_data_fetch"]').on("click",function(a){a.preventDefault();var t=this,o=e('button[name="sq_force_data_fetch_stop"]'),s=60/e('select[name="stockquote_defaults[av_api_tier]"]').val()*1e3;e(t).prop("disabled",!0),e(o).addClass("enabled"),e.ajax({type:"post",dataType:"json",async:!0,url:stockQuoteJs.ajax_url,data:{action:"stockquote_purge_cache"}}).done(function(a){function n(){e.ajax({type:"post",dataType:"json",async:!0,url:stockQuoteJs.ajax_url,data:{action:"stockquote_update_quotes"}}).done(function(a){if(a.done||"true"==e(o).data("stop"))"DONE"!=a.message?e(".sq_force_data_fetch").append("<br />["+a.symbol+"] "+a.message):e(".sq_force_data_fetch").append("<br />DONE"),e(t).prop("disabled",!1),e(o).removeClass("enabled").data("stop","false");else{if(a.message.indexOf("Operation timed out")>=0)e(".sq_force_data_fetch").append("[Timeout] "+a.symbol+"<br />");else if(a.message.indexOf("Invalid API call")>=0){stockQuoteJs.avurl;e(".sq_force_data_fetch").append("[Invalid API call] "+a.symbol+' (<a href="'+stockQuoteJs.avurl+a.symbol+'" target="_blank">test</a>)<br />')}else e(".sq_force_data_fetch").append("[OK] "+a.symbol+"<br />");setTimeout(function(){n()},s)}}).fail(function(a){e(".sq_force_data_fetch").append("<br />[Error] "+a.message)})}e(".sq_force_data_fetch").html("Reset fetching loop and fetch data again. Please wait...<br /><br />"),n()})})});